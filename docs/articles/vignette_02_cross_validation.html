<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Time Series Cross Validation • tscv</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Time Series Cross Validation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tscv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vignette_01_introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/vignette_02_cross_validation.html">Time Series Cross Validation</a></li>
    <li><a class="dropdown-item" href="../articles/vignette_03_data_visualization.html">Visualization of Time Series Data</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ahaeusser/tscv/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Time Series Cross Validation</h1>
                        <h4 data-toc-skip class="author">Alexander
Häußer</h4>
            
            <h4 data-toc-skip class="date">Dezember 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ahaeusser/tscv/blob/HEAD/vignettes/vignette_02_cross_validation.Rmd" class="external-link"><code>vignettes/vignette_02_cross_validation.Rmd</code></a></small>
      <div class="d-none name"><code>vignette_02_cross_validation.Rmd</code></div>
    </div>

    
    
<p>The package <code>tscv</code> provides a collection of functions and
tools for time series analysis and forecasting as well as time series
cross-validation. This is mainly a set of wrapper and helper functions
as well as some extensions for the packages <code>tsibble</code>,
<code>fable</code> and <code>fabletools</code> that I find useful for
research in the area of time series forecasting.</p>
<p><strong><em>Disclaimer:</em></strong> The <code>tscv</code> package
is highly experimental and it is very likely that there will be
(substantial) changes in the near future.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ahaeusser/tscv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load relevant packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ahaeusser/tscv" class="external-link">tscv</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">#&gt;   object 'type_sum.accel' not found</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tsibble.tidyverts.org" class="external-link">tsibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fable.tidyverts.org" class="external-link">fable</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://feasts.tidyverts.org/" class="external-link">feasts</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>The data set <code>elec_price</code> is a <code>tibble</code> with
day-ahead electricity spot prices in [EUR/MWh] from the ENTSO-E
Transparency Platform. The data set contains hourly time series data
from 2019-01-01 to 2020-12-31 for 8 European bidding zones (BZN):</p>
<ul>
<li>DE: Germany (including Luxembourg)</li>
<li>DK: Denmark</li>
<li>ES: Spain</li>
<li>FI: Finland</li>
<li>FR: France</li>
<li>NL: Netherlands</li>
<li>NO1: Norway 1 (Oslo)</li>
<li>SE1: Sweden 1 (Lulea)</li>
</ul>
<p>In this vignette, we will use only four time series to demonstrate
the functionality of the package (the data set is filtered to the
bidding zones Germany, France, Norway and Sweden). You can use the
function <code><a href="../reference/plot_line.html">plot_line()</a></code> to visualize the four time series. The
function <code><a href="../reference/summarise_data.html">summarise_data()</a></code> is used to explore the structure
(start date, end date, number of observations and the number missing and
zero values). The function <code><a href="../reference/summarise_stats.html">summarise_stats()</a></code> calculates
descriptive statistics for each time series.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">series_id</span> <span class="op">=</span> <span class="st">"bidding_zone"</span></span>
<span><span class="va">value_id</span> <span class="op">=</span> <span class="st">"value"</span></span>
<span><span class="va">index_id</span> <span class="op">=</span> <span class="st">"time"</span></span>
<span></span>
<span><span class="va">context</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  series_id <span class="op">=</span> <span class="va">series_id</span>,</span>
<span>  value_id <span class="op">=</span> <span class="va">value_id</span>,</span>
<span>  index_id <span class="op">=</span> <span class="va">index_id</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare data set</span></span>
<span><span class="va">main_frame</span> <span class="op">&lt;-</span> <span class="va">elec_price</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">bidding_zone</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DE"</span>, <span class="st">"FR"</span>, <span class="st">"NO1"</span>, <span class="st">"SE1"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">main_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 70,176 × 5</span></span></span>
<span><span class="co">#&gt;    time                item            unit      bidding_zone  value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2019-01-01 <span style="color: #949494;">00:00:00</span> Day-ahead Price [EUR/MWh] DE            10.1 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-01-01 <span style="color: #949494;">01:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.08</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2019-01-01 <span style="color: #949494;">02:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">9.91</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2019-01-01 <span style="color: #949494;">03:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">7.41</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2019-01-01 <span style="color: #949494;">04:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">12.6</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-01-01 <span style="color: #949494;">05:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">17.2</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2019-01-01 <span style="color: #949494;">06:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">15.1</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2019-01-01 <span style="color: #949494;">07:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2019-01-01 <span style="color: #949494;">08:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">6.33</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-01-01 <span style="color: #949494;">09:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 70,166 more rows</span></span></span>
<span></span>
<span><span class="va">main_frame</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_line.html">plot_line</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">time</span>,</span>
<span>    y <span class="op">=</span> <span class="va">value</span>,</span>
<span>    color <span class="op">=</span> <span class="va">bidding_zone</span>,</span>
<span>    facet_var <span class="op">=</span> <span class="va">bidding_zone</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Day-ahead Electricity Spot Price"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"2019-01-01 to 2020-12-31"</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>    ylab <span class="op">=</span> <span class="st">"[EUR/MWh]"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Data: ENTSO-E Transparency"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><img src="vignette_02_cross_validation_files/figure-html/clean_data-1.png" alt="Plot raw data" width="672"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/summarise_data.html">summarise_data</a></span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   bidding_zone start               end                 n_obs n_missing</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> DE           2019-01-01 <span style="color: #949494;">00:00:00</span> 2020-12-31 <span style="color: #949494;">23:00:00</span> <span style="text-decoration: underline;">17</span>544         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FR           2019-01-01 <span style="color: #949494;">00:00:00</span> 2020-12-31 <span style="color: #949494;">23:00:00</span> <span style="text-decoration: underline;">17</span>544         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> NO1          2019-01-01 <span style="color: #949494;">00:00:00</span> 2020-12-31 <span style="color: #949494;">23:00:00</span> <span style="text-decoration: underline;">17</span>544         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SE1          2019-01-01 <span style="color: #949494;">00:00:00</span> 2020-12-31 <span style="color: #949494;">23:00:00</span> <span style="text-decoration: underline;">17</span>544         0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: pct_missing &lt;dbl&gt;, n_zeros &lt;int&gt;, pct_zeros &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="fu"><a href="../reference/summarise_stats.html">summarise_stats</a></span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 11</span></span></span>
<span><span class="co">#&gt;   bidding_zone  mean median  mode    sd     p0   p25   p75  p100 skewness</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> DE            34.1   35.1 35.9   16.9 -<span style="color: #BB0000;">90.0</span>  26.3   43.8  200.   -<span style="color: #BB0000;">0.776</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FR            35.8   36   37.2   15.5 -<span style="color: #BB0000;">75.8</span>  26.6   44.9  200.    0.323</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> NO1           24.3   26.9  2.66  17.1  -<span style="color: #BB0000;">1.73</span>  6.95  38.8  109.    0.189</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SE1           26.1   27.9 37.9   15.9  -<span style="color: #BB0000;">1.73</span> 11.4   38.5  189.    0.378</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: kurtosis &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="split-data-into-training-and-testing">Split data into training and testing<a class="anchor" aria-label="anchor" href="#split-data-into-training-and-testing"></a>
</h2>
<p>To prepare the data set for time series cross-validation (TSCV), you
can use the function <code><a href="../reference/make_split.html">make_split()</a></code>. This function splits the
data into several slices for training and testing (i.e. partitioning
into time slices) for time series cross-validation. You can choose
between <code>stretch</code> and <code>slide</code>. The first is an
expanding window approach, while the latter is a fixed window approach.
Furthermore, we define the (initial) window size for training and
testing via <code>n_init</code> and <code>n_ahead</code>, as well as the
step size for increments via <code>n_skip</code>. Further options for
splitting the data are available via <code>type</code> (see function
reference for more details).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Setup for time series cross validation</span></span>
<span><span class="va">type</span> <span class="op">=</span> <span class="st">"first"</span></span>
<span><span class="va">value</span> <span class="op">=</span> <span class="fl">2400</span>      <span class="co"># size for training window</span></span>
<span><span class="va">n_ahead</span> <span class="op">=</span> <span class="fl">24</span>      <span class="co"># size for testing window (= forecast horizon)</span></span>
<span><span class="va">n_skip</span> <span class="op">=</span> <span class="fl">23</span>       <span class="co"># skip 23 observations</span></span>
<span><span class="va">n_lag</span> <span class="op">=</span> <span class="fl">0</span>         <span class="co"># no lag</span></span>
<span><span class="va">mode</span> <span class="op">=</span> <span class="st">"slide"</span>    <span class="co"># fixed window approach</span></span>
<span><span class="va">exceed</span> <span class="op">=</span> <span class="cn">FALSE</span>    <span class="co"># only pseudo out-of-sample forecast</span></span>
<span></span>
<span><span class="va">split_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_split.html">make_split</a></span><span class="op">(</span></span>
<span>  main_frame <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span>,</span>
<span>  type <span class="op">=</span> <span class="va">type</span>,</span>
<span>  value <span class="op">=</span> <span class="va">value</span>,</span>
<span>  n_ahead <span class="op">=</span> <span class="va">n_ahead</span>,</span>
<span>  n_skip <span class="op">=</span> <span class="va">n_skip</span>,</span>
<span>  n_lag <span class="op">=</span> <span class="va">n_lag</span>,</span>
<span>  mode <span class="op">=</span> <span class="va">mode</span>,</span>
<span>  exceed <span class="op">=</span> <span class="va">exceed</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For illustration, only the first 50 splits are used</span></span>
<span><span class="va">split_frame</span> <span class="op">&lt;-</span> <span class="va">split_frame</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">split</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">split_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 200 × 4</span></span></span>
<span><span class="co">#&gt;    bidding_zone split train         test      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> DE               1 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> DE               2 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DE               3 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DE               4 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DE               5 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DE               6 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DE               7 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DE               8 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> DE               9 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> DE              10 <span style="color: #949494;">&lt;int [2,400]&gt;</span> <span style="color: #949494;">&lt;int [24]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 190 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="training-and-forecasting">Training and forecasting<a class="anchor" aria-label="anchor" href="#training-and-forecasting"></a>
</h2>
<p>The training and test splits are prepared within
<code>split_frame</code> and we are ready for forecasting. The function
<code><a href="../reference/slice_train.html">slice_train()</a></code> slices the data <code>main_frame</code>
according to the splits within <code>split_frame</code>. As we are using
forecasting methods from the packages <code>fable</code> and
<code>fabletools</code>, we have to convert the data set
<code>main_frame</code> from a <code>tibble</code> to a
<code>tsibble</code>. Due to the sample size and computation time, only
very simple benchmark methods are used:</p>
<ul>
<li>
<code>SNAIVE</code>: Seasonal naive model with weekly seasonality
(from package <code>fable</code>)</li>
<li>
<code>STL-NAIVE</code>: STL-decomposition model and naive forecast.
The series is decomposed via STL and the seasonal adjusted series is
predicted via the naive approach. Afterwards, seasonal component is
added to the forecasts (from packages <code>fable</code> and
<code>feasts</code>)</li>
<li>
<code>SNAIVE2</code>: Variation of the seasonal naive approach.
Mondays, Saturdays and Sundays are treated with a weekly lag. Tuesdays,
Wednesdays, Thursdays and Fridays are treated with a daily lag.</li>
<li>
<code>SMEDIAN</code>: Seasonal median model</li>
</ul>
<p>The functions <code><a href="../reference/SMEDIAN.html">SMEDIAN()</a></code> and <code><a href="../reference/SNAIVE2.html">SNAIVE2()</a></code> are
extensions to the <code>fable</code> package</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Slice training data from main_frame according to split_frame</span></span>
<span><span class="va">train_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slice_train.html">slice_train</a></span><span class="op">(</span></span>
<span>  main_frame <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  split_frame <span class="op">=</span> <span class="va">split_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">train_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 480,000 × 6</span></span></span>
<span><span class="co">#&gt;    time                item            unit      bidding_zone  value split</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2019-01-01 <span style="color: #949494;">00:00:00</span> Day-ahead Price [EUR/MWh] DE            10.1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-01-01 <span style="color: #949494;">01:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.08</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2019-01-01 <span style="color: #949494;">02:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">9.91</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2019-01-01 <span style="color: #949494;">03:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">7.41</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2019-01-01 <span style="color: #949494;">04:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">12.6</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-01-01 <span style="color: #949494;">05:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">17.2</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2019-01-01 <span style="color: #949494;">06:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">15.1</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2019-01-01 <span style="color: #949494;">07:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2019-01-01 <span style="color: #949494;">08:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">6.33</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-01-01 <span style="color: #949494;">09:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 479,990 more rows</span></span></span>
<span></span>
<span><span class="co"># Convert tibble to tsibble</span></span>
<span><span class="va">train_frame</span> <span class="op">&lt;-</span> <span class="va">train_frame</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span></span>
<span>    index <span class="op">=</span> <span class="va">time</span>,</span>
<span>    key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bidding_zone</span>, <span class="va">split</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">train_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 480,000 x 6 [1h] &lt;UTC&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       bidding_zone, split [200]</span></span></span>
<span><span class="co">#&gt;    time                item            unit      bidding_zone  value split</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2019-01-01 <span style="color: #949494;">00:00:00</span> Day-ahead Price [EUR/MWh] DE            10.1      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-01-01 <span style="color: #949494;">01:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.08</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2019-01-01 <span style="color: #949494;">02:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">9.91</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2019-01-01 <span style="color: #949494;">03:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">7.41</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2019-01-01 <span style="color: #949494;">04:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">12.6</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-01-01 <span style="color: #949494;">05:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">17.2</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2019-01-01 <span style="color: #949494;">06:00:00</span> Day-ahead Price [EUR/MWh] DE           -<span style="color: #BB0000;">15.1</span>      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2019-01-01 <span style="color: #949494;">07:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2019-01-01 <span style="color: #949494;">08:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">6.33</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-01-01 <span style="color: #949494;">09:00:00</span> Day-ahead Price [EUR/MWh] DE            -<span style="color: #BB0000;">4.93</span>     1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 479,990 more rows</span></span></span>
<span></span>
<span><span class="co"># Model training via fabletools::model()</span></span>
<span><span class="va">model_frame</span> <span class="op">&lt;-</span> <span class="va">train_frame</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/model.html" class="external-link">model</a></span><span class="op">(</span></span>
<span>    <span class="st">"SNAIVE"</span> <span class="op">=</span> <span class="fu"><a href="https://fable.tidyverts.org/reference/RW.html" class="external-link">SNAIVE</a></span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="st">"week"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"STL-NAIVE"</span> <span class="op">=</span> <span class="fu"><a href="https://fabletools.tidyverts.org/reference/decomposition_model.html" class="external-link">decomposition_model</a></span><span class="op">(</span><span class="fu"><a href="https://feasts.tidyverts.org/reference/STL.html" class="external-link">STL</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>, <span class="fu"><a href="https://fable.tidyverts.org/reference/RW.html" class="external-link">NAIVE</a></span><span class="op">(</span><span class="va">season_adjust</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="st">"SNAIVE2"</span> <span class="op">=</span> <span class="fu"><a href="../reference/SNAIVE2.html">SNAIVE2</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    <span class="st">"SMEDIAN"</span> <span class="op">=</span> <span class="fu"><a href="../reference/SMEDIAN.html">SMEDIAN</a></span><span class="op">(</span><span class="va">value</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="st">"week"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">model_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A mable: 200 x 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:     bidding_zone, split [200]</span></span></span>
<span><span class="co">#&gt;    bidding_zone split   SNAIVE               `STL-NAIVE`   SNAIVE2   SMEDIAN</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;model&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;model&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;model&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;model&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> DE               1 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> DE               2 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DE               3 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DE               4 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DE               5 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DE               6 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DE               7 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DE               8 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> DE               9 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> DE              10 &lt;SNAIVE&gt; &lt;STL decomposition model&gt; &lt;SNAIVE2&gt; &lt;SMEDIAN&gt;</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 190 more rows</span></span></span>
<span></span>
<span><span class="co"># Forecasting via fabletools::forecast()</span></span>
<span><span class="va">fable_frame</span> <span class="op">&lt;-</span> <span class="va">model_frame</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast</a></span><span class="op">(</span>h <span class="op">=</span> <span class="va">n_ahead</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fable_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A fable: 19,200 x 6 [1h] &lt;UTC&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:     bidding_zone, split, .model [800]</span></span></span>
<span><span class="co">#&gt;    bidding_zone split .model time               </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">00:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">01:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">02:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">03:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">04:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">05:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">06:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">07:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">08:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> DE               1 SNAIVE 2019-04-11 <span style="color: #949494;">09:00:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19,190 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: value &lt;dist&gt;, .mean &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># Convert fable_frame (fable) to future_frame (tibble)</span></span>
<span><span class="va">future_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_future.html">make_future</a></span><span class="op">(</span></span>
<span>  fable <span class="op">=</span> <span class="va">fable_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">future_frame</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 19,200 × 6</span></span></span>
<span><span class="co">#&gt;    time                bidding_zone model  split horizon point</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2019-04-11 <span style="color: #949494;">00:00:00</span> DE           SNAIVE     1       1  33  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2019-04-11 <span style="color: #949494;">01:00:00</span> DE           SNAIVE     1       2  32.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2019-04-11 <span style="color: #949494;">02:00:00</span> DE           SNAIVE     1       3  34.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2019-04-11 <span style="color: #949494;">03:00:00</span> DE           SNAIVE     1       4  36.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2019-04-11 <span style="color: #949494;">04:00:00</span> DE           SNAIVE     1       5  44.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2019-04-11 <span style="color: #949494;">05:00:00</span> DE           SNAIVE     1       6  53.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2019-04-11 <span style="color: #949494;">06:00:00</span> DE           SNAIVE     1       7  59.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2019-04-11 <span style="color: #949494;">07:00:00</span> DE           SNAIVE     1       8  46.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2019-04-11 <span style="color: #949494;">08:00:00</span> DE           SNAIVE     1       9  48  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2019-04-11 <span style="color: #949494;">09:00:00</span> DE           SNAIVE     1      10  47  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19,190 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="evaluation-of-forecast-accuracy">Evaluation of forecast accuracy<a class="anchor" aria-label="anchor" href="#evaluation-of-forecast-accuracy"></a>
</h2>
<p>To evaluate the forecast accuracy, the function
<code><a href="../reference/make_accuracy.html">make_accuracy()</a></code> is used. You can define whether to evaluate
the accuracy by <code>horizon</code> or by <code>split</code>. Several
accuracy metrics are available:</p>
<ul>
<li>
<code>ME</code>: mean error</li>
<li>
<code>MAE</code>: mean absolute error</li>
<li>
<code>MSE</code>: mean squared error</li>
<li>
<code>RMSE</code>: root mean squared error</li>
<li>
<code>MAPE</code>: mean absolute percentage error</li>
<li>
<code>sMAPE</code>: scaled mean absolute percentage error</li>
<li>
<code>MPE</code>: mean percentage error</li>
<li>
<code>rMAE</code>: relative mean absolute error (relative to some
user-defined benchmark method)</li>
</ul>
<div class="section level3">
<h3 id="forecast-accuracy-by-forecast-horizon">Forecast accuracy by forecast horizon<a class="anchor" aria-label="anchor" href="#forecast-accuracy-by-forecast-horizon"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Estimate accuracy metrics by forecast horizon</span></span>
<span><span class="va">accuracy_horizon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_accuracy.html">make_accuracy</a></span><span class="op">(</span></span>
<span>  future_frame <span class="op">=</span> <span class="va">future_frame</span>,</span>
<span>  main_frame <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span>,</span>
<span>  dimension <span class="op">=</span> <span class="st">"horizon"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">accuracy_horizon</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2,688 × 6</span></span></span>
<span><span class="co">#&gt;    bidding_zone model   dimension     n metric value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> DE           SMEDIAN horizon       1 MAE     4.84</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> DE           SMEDIAN horizon       2 MAE     5.05</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DE           SMEDIAN horizon       3 MAE     4.85</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DE           SMEDIAN horizon       4 MAE     4.50</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DE           SMEDIAN horizon       5 MAE     6.73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DE           SMEDIAN horizon       6 MAE     6.66</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DE           SMEDIAN horizon       7 MAE     6.40</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DE           SMEDIAN horizon       8 MAE     6.73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> DE           SMEDIAN horizon       9 MAE     7.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> DE           SMEDIAN horizon      10 MAE     9.06</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,678 more rows</span></span></span>
<span></span>
<span><span class="co"># Visualize results</span></span>
<span><span class="va">accuracy_horizon</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"MAE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_line.html">plot_line</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">n</span>,</span>
<span>    y <span class="op">=</span> <span class="va">value</span>,</span>
<span>    facet_var <span class="op">=</span> <span class="va">bidding_zone</span>,</span>
<span>    facet_nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    color <span class="op">=</span> <span class="va">model</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Evaluation of forecast accuracy by forecast horizon"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Mean absolute error (MAE)"</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"Forecast horizon (n-step-ahead)"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Data: ENTSO-E Transparency, own calculation"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><img src="vignette_02_cross_validation_files/figure-html/accuracy_horizon-1.png" alt="Plot accuracy by horizon" width="672"></p>
</div>
<div class="section level3">
<h3 id="forecast-accuracy-by-split">Forecast accuracy by split<a class="anchor" aria-label="anchor" href="#forecast-accuracy-by-split"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Estimate accuracy metrics by forecast horizon</span></span>
<span><span class="va">accuracy_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_accuracy.html">make_accuracy</a></span><span class="op">(</span></span>
<span>  future_frame <span class="op">=</span> <span class="va">future_frame</span>,</span>
<span>  main_frame <span class="op">=</span> <span class="va">main_frame</span>,</span>
<span>  context <span class="op">=</span> <span class="va">context</span>,</span>
<span>  dimension <span class="op">=</span> <span class="st">"split"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">accuracy_split</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5,600 × 6</span></span></span>
<span><span class="co">#&gt;    bidding_zone model   dimension     n metric value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> DE           SMEDIAN split         1 MAE     2.80</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> DE           SMEDIAN split         2 MAE     3.74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DE           SMEDIAN split         3 MAE     2.70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DE           SMEDIAN split         4 MAE     2.53</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> DE           SMEDIAN split         5 MAE     4.54</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DE           SMEDIAN split         6 MAE     3.78</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DE           SMEDIAN split         7 MAE     4.38</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> DE           SMEDIAN split         8 MAE     4.87</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> DE           SMEDIAN split         9 MAE    11.5 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> DE           SMEDIAN split        10 MAE     5.02</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5,590 more rows</span></span></span>
<span></span>
<span><span class="co"># Visualize results</span></span>
<span><span class="va">accuracy_split</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"MAE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/plot_line.html">plot_line</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">n</span>,</span>
<span>    y <span class="op">=</span> <span class="va">value</span>,</span>
<span>    facet_var <span class="op">=</span> <span class="va">bidding_zone</span>,</span>
<span>    facet_nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    color <span class="op">=</span> <span class="va">model</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Evaluation of forecast accuracy by split"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Mean absolute error (MAE)"</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"Split"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Data: ENTSO-E Transparency, own calculation"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><img src="vignette_02_cross_validation_files/figure-html/accuracy_split-1.png" alt="Plot accuracy by split" width="672"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Häußer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
